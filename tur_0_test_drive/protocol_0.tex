% arara: pdflatex
\documentclass[12pt]{article}


% если не менять дизайн, то поправить надо только 
% \newcommand{\tour}{...}
% и 
% \newcommand{\blockofjudges}{...}

\newcommand{\tour}{ФМТ демо-тур} % номер тура

\newcommand{\blockofjudges}{

% table x
% \protocol{where}{team-a}{team-b}{top judge}{more judges} % comment


% все сотрудники:
% Ян Шапиро, Ольга Володько, Вова Федоров, Миша Красков, Дмитрий Федченко, Лев Назаров,
% Тима Спрыжков, Паша Рябенко, Марина Хмельницкая, Никита Терентьев, Вова Носков,
% Антон Шейкин, Саша Тимошков, Настя Судницына, Миша Торшин, Егор Лунев
% Егор Скурковин, Вика Фонарева, Ваня Адо, Влада Синицына, Маша Казаринова
% Сережа Ламзин, Денис Гохфельд, Герман Злобин, Рома Лисин, Андрей Трегубович,
% Роберт Гринштейн, Саша Акантьев

% пустой протокол для ручного заполнения
% пустой протокол для ручного заполнения
% day 0
    \protocol{1.1}{$\phi$}{$\sigma$}{Егор Лунев}{Егор Скурковин, Вика Фонарева}

    \protocol{1.2}{$\psi$}{$\tau$}{Миша Красков}{Влада Синицына, Маша Казаринова}
    
    \protocol{2.1}{$\gamma$}{$\lambda$}{Сережа Ламзин}{Денис Гохфельд, Герман Злобин}
    
    \protocol{2.2}{$\delta$}{$\iota$}{Тима Спрыжков}{Андрей Трегубович}
    
    \protocol{3.1}{$\epsilon$}{$\eta$}{Роберт Гринштейн}{Саша Акантьев}

    \protocol{1.1}{$\rho$}{o}{Ян Шапиро}{Ольга Володько, Вова Федоров} %

    \protocol{1.2}{$\mu$}{$\pi$}{Ваня Адо}{Дмитрий Федченко, Лев Назаров}
    
    \protocol{2.1}{$\beta$}{$\theta$}{Рома Лисин}{Паша Рябенко}
    
    \protocol{2.2}{$\alpha$}{$\kappa$}{Марина Хмельницкая}{Никита Терентьев, Вова Носков}
    
    \protocol{3.1}{$\omega$}{$\nu$}{Антон Шейкин}{Саша Тимошков, Герман Злобин}
    
    \protocol{3.2}{$\xi$}{$\chi$}{Настя Судницына}{Миша Торшин}
}

\newcommand{\secondblock}{
    \protocol{1.1}{$\rho$}{o}{Ян Шапиро}{Ольга Володько, Вова Федоров} %

    \protocol{1.2}{$\mu$}{$\pi$}{Ваня Адо}{Дмитрий Федченко, Лев Назаров}
    
    \protocol{2.1}{$\beta$}{$\theta$}{Рома Лисин}{Паша Рябенко}
    
    \protocol{2.2}{$\alpha$}{$\kappa$}{Марина Хмельницкая}{Никита Терентьев, Вова Носков}
    
    \protocol{3.1}{$\omega$}{$\nu$}{Антон Шейкин}{Саша Тимошков, Герман Злобин}
    
    \protocol{3.2}{$\xi$}{$\chi$}{Настя Судницына}{Миша Торшин}
}

\newcommand{\firstblock}{
    \protocol{1.1}{$\phi$}{$\sigma$}{Егор Лунев}{Егор Скурковин, Вика Фонарева}

    \protocol{1.2}{$\psi$}{$\tau$}{Миша Красков}{Влада Синицына, Маша Казаринова}
    
    \protocol{2.1}{$\gamma$}{$\lambda$}{Сережа Ламзин}{Денис Гохфельд, Герман Злобин}
    
    \protocol{2.2}{$\delta$}{$\iota$}{Тима Спрыжков}{Андрей Трегубович}
    
    \protocol{3.1}{$\epsilon$}{$\eta$}{Роберт Гринштейн}{Саша Акантьев}
}


\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
\usepackage{wrapfig}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{geometry}
\usepackage{graphicx}
\usepackage{rotating}
\usepackage{makecell}
\usepackage{array}
\usepackage{tikzsymbols}
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}}

\geometry{top=0.5cm}
\geometry{bottom=0.5cm}
\geometry{left=1cm}
\geometry{right=1cm}
\pagestyle{empty}

\usepackage{booktabs}
% заповеди из документации:
% 1. Не используйте вертикальные линни
% 2. Не используйте двойные линии
% 3. Единицы измерения - в шапку таблицы
% 4. Не сокращайте .1 вместо 0.1
% 5. Повторяющееся значение повторяйте, а не говорите "то же"

\newcommand{\myrotcell}[1]{\rotcell{\makebox[0pt][l]{#1}}}

\newcommand{\protocol}[5]{
\begin{minipage}{.2\textwidth}
    \begin{center}
    \includegraphics[width=0.48\textwidth]{klsh_logo.pdf}
    \end{center}
\end{minipage}
\begin{minipage}{.6\textwidth}
    \begin{flushleft}
    \textbf{Старший судья}: #4\\ 
    \textbf{Судьи}: #5 \\ 
    \textbf{Аудитория}: #1 \\ 
    \end{flushleft}
\end{minipage}
\begin{minipage}{.2\textwidth}
    \begin{flushleft}
        {\Large\textbf{\tour}} \\
        \textbf{Команды}: #2 --- #3 
    \end{flushleft}
\end{minipage}


\vspace*{0.2cm}
\begin{tabular}{ | M{0.4cm} | M{2cm} | M{6.1cm} | M{0.8cm} | M{0.8cm} | M{0.5cm} | M{6.1cm} |}
    \hline
    \Smiley[1.6] & Время & Ответ и игрок #2 & балл #2 & балл #3 & \tiny{ $\times$ $\leftarrow$ $\rightarrow$} & Ответ и игрок #3 \\
    \hline
    \rotatebox{90}{Задача 1\hspace*{1cm}} & & & & & & \\ [2.1cm]
    \hline
    \rotatebox{90}{Задача 2\hspace*{1cm}} & & & & & & \\ [2.1cm]
    \hline
    \rotatebox{90}{Задача 3\hspace*{1cm}} & & & & & & \\ [2.1cm]
    \hline
    \rotatebox{90}{Задача 4\hspace*{1cm}} & & & & & & \\ [2.1cm]
    \hline
\end{tabular}

\vspace*{0.25cm} 

\begin{minipage}{.42\textwidth}

%Условные значки: \\
$\times$ задача снята \\
$\rightarrow$ переход от #2 к #3 \\
$\leftarrow$ переход от #3 к #2 \\

\begin{tabular}{ | m{6cm} | M{6cm} | M{6cm} |}
\hline
\textbf{} & #2 & #3 \\
\hline
Вольные стрелки & & \\ [0.8cm]
\hline
Итог & & \\ [0.8cm]
\hline 
\end{tabular}

\vspace*{1cm}
\textbf{Подписи команд:}\dotfill\\

\vspace*{0.5cm}
\textbf{Подписи судей:}\dotfill\\
\end{minipage}
\newpage
}


\setlength\parindent{0pt}
\begin{document}


\blockofjudges

\renewcommand{\protocol}[5]{
    #2 — #3 & #1 \\ 
    \hline 
}

{\Huge 
\begin{center}
   \bf \tour \\
    \vspace{1.5 cm}
    {\bf Первый заход}\\
    \vspace{1.5 cm}
    \begin{tabular}{| M{6cm} | M{6cm} |}
        \hline
        Команды & Аудитория\\ 
        \hline
        \firstblock
    \end{tabular}
    \vspace{1.5 cm}\\
    {\bf Второй заход}\\
    \vspace{1.5 cm}
    \begin{tabular}{| M{6cm} | M{6cm} |}
        \hline
        Команды & Аудитория\\ 
        \hline
        \secondblock
    \end{tabular}

    \end{center}
}

\newpage
\renewcommand{\protocol}[5]{
    #2 — #3 & #1 & #4, #5\\ 
    \hline 
}

{\Large
\begin{center}
   \bf {\Huge \tour} \\
    \vspace{1.5cm}
    {\bf Первый заход}\\
    \vspace{1.5cm}
    \begin{tabular}{| c | c | M{10cm}|}
    \hline
    Команды & Аудитория & Судьи\\ 
    \hline
    \firstblock
    \end{tabular}
    \vspace{1.5cm}\\
    {\bf Второй заход}\\
    \vspace{1.5cm}
    \begin{tabular}{| c | c | M{10cm}|}
    \hline
    Команды & Аудитория& Судьи\\ 
    \hline
    \secondblock
    \end{tabular}
    \end{center}
}


\end{document}


